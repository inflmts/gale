#!/bin/sh
# gale-sleep - put the system to sleep
#
# This file is part of Gale.
#

set -u

echo() { printf '%s\n' "$1"; }
diag() { printf >&2 '%s\n' "$1"; }
warn() { printf >&2 'warning: %s\n' "$1"; }
err() { printf >&2 'error: %s\n' "$1"; }

if [ $# -gt 0 ]; then
  diag "usage: gale-sleep"
  exit 1
fi

if ! id=$(. /etc/os-release && echo "$ID"); then
  err "failed to determine operating system"
  exit 1
fi

case $id in
  void)
    exec sudo zzz
    ;;
  *)
    exec systemctl suspend
    ;;
esac
